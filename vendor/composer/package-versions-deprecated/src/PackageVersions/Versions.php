<?php

declare(strict_types=1);

namespace PackageVersions;

use Composer\InstalledVersions;
use OutOfBoundsException;

class_exists(InstalledVersions::class);

/**
 * This class is generated by composer/package-versions-deprecated, specifically by
 * @see \PackageVersions\Installer
 *
 * This file is overwritten at every run of `composer install` or `composer update`.
 *
 * @deprecated in favor of the Composer\InstalledVersions class provided by Composer 2. Require composer-runtime-api:^2 to ensure it is present.
 */
final class Versions
{
    /**
     * @deprecated please use {@see self::rootPackageName()} instead.
     *             This constant will be removed in version 2.0.0.
     */
    const ROOT_PACKAGE_NAME = 'nette/web-project';

    /**
     * Array of all available composer packages.
     * Dont read this array from your calling code, but use the \PackageVersions\Versions::getVersion() method instead.
     *
     * @var array<string, string>
     * @internal
     */
    const VERSIONS          = array (
  'composer/package-versions-deprecated' => '1.11.99.5@b4f54f74ef3453349c24a845d22392cd31e65f1d',
  'contributte/console' => 'v0.9.3@f229171e71ac14709c2e932413f385ce7f1b036e',
  'contributte/di' => 'v0.5.6@49d6b93d46f57be319b1e811cd983bfed0c90979',
  'doctrine/annotations' => '1.14.3@fb0d71a7393298a7b232cbf4c8b1f73f3ec3d5af',
  'doctrine/cache' => '1.13.0@56cd022adb5514472cb144c087393c1821911d09',
  'doctrine/collections' => '1.8.0@2b44dd4cbca8b5744327de78bafef5945c7e7b5e',
  'doctrine/common' => '3.4.3@8b5e5650391f851ed58910b3e3d48a71062eeced',
  'doctrine/dbal' => '2.13.9@c480849ca3ad6706a39c970cdfe6888fa8a058b8',
  'doctrine/deprecations' => 'v0.5.3@9504165960a1f83cc1480e2be1dd0a0478561314',
  'doctrine/event-manager' => '1.2.0@95aa4cb529f1e96576f3fda9f5705ada4056a520',
  'doctrine/inflector' => '2.0.8@f9301a5b2fb1216b2b08f02ba04dc45423db6bff',
  'doctrine/instantiator' => '1.5.0@0a0fa9780f5d4e507415a065172d26a98d02047b',
  'doctrine/lexer' => '1.2.3@c268e882d4dbdd85e36e4ad69e02dc284f89d229',
  'doctrine/orm' => '2.10.5@1e972b6e0e3468355901a301735d859165490af2',
  'doctrine/persistence' => '2.5.7@e36f22765f4d10a7748228babbf73da5edfeed3c',
  'latte/latte' => 'v2.11.7@0ac0843a459790d471821f6a82f5d13db831a0d3',
  'nette/application' => 'v3.1.14@0729ede7e66fad642046a3eb670d368845272573',
  'nette/bootstrap' => 'v3.2.1@eeb1c9dc9f1391bd03aeeb6cc0e456ec9b247f5c',
  'nette/caching' => 'v3.2.3@6821d74c1db82c493c02c47f6485022d79b63176',
  'nette/component-model' => 'v3.0.3@9d97c0e1916bbf8e306283ab187834501fd4b1f5',
  'nette/database' => 'v3.1.9@4a21417d545e226a8fe189b95111d23a454bd2b3',
  'nette/di' => 'v3.1.8@adf475076dae08109dd0d57b1a48668d1d1bedf0',
  'nette/finder' => 'v2.6.0@991aefb42860abeab8e003970c3809a9d83cb932',
  'nette/forms' => 'v3.1.14@888aba2947e0878303b001827abe25ca86530a75',
  'nette/http' => 'v3.2.3@54d79711ff3a8dfd86201e3bdbdd6972177ea20b',
  'nette/mail' => 'v3.1.11@804d70278458452863a2d6be4c1d5bf5f91b3950',
  'nette/neon' => 'v3.4.1@457bfbf0560f600b30d9df4233af382a478bb44d',
  'nette/php-generator' => 'v4.1.2@abc0e79b2d02d4b8aba5933765b90df3f610c143',
  'nette/robot-loader' => 'v3.4.2@970c8f82be98ec54180c88a468cd2b057855d993',
  'nette/routing' => 'v3.0.5@ff709ff9ed38a14c4fe3472534526593a8461ff5',
  'nette/schema' => 'v1.2.5@0462f0166e823aad657c9224d0f849ecac1ba10a',
  'nette/security' => 'v3.1.8@9b8e5c76b2e738350498470c35a36a6f0d0e38d6',
  'nette/utils' => 'v3.2.10@a4175c62652f2300c8017fb7e640f9ccb11648d2',
  'nettrine/annotations' => 'v0.7.0@fbb06d156a4edcbf37e4154e5b4ede079136388b',
  'nettrine/cache' => 'v0.3.0@8a58596de24cdd61e45866ef8f35788675f6d2bc',
  'nettrine/dbal' => 'v0.7.1@9d6f2dc0979ff4665c51ccfdc8b0b6a3ddc369fb',
  'nettrine/orm' => 'v0.8.4@d253e200217293ede49a4c4ca76c6e0d43b57242',
  'psr/cache' => '3.0.0@aa5030cfa5405eccfdcb1083ce040c2cb8d253bf',
  'psr/container' => '2.0.2@c71ecc56dfe541dbd90c5360474fbc405f8d5963',
  'symfony/console' => 'v6.4.2@0254811a143e6bc6c8deea08b589a7e68a37f625',
  'symfony/deprecation-contracts' => 'v3.4.0@7c3aff79d10325257a001fcf92d991f24fc967cf',
  'symfony/polyfill-ctype' => 'v1.28.0@ea208ce43cbb04af6867b4fdddb1bdbf84cc28cb',
  'symfony/polyfill-intl-grapheme' => 'v1.28.0@875e90aeea2777b6f135677f618529449334a612',
  'symfony/polyfill-intl-normalizer' => 'v1.28.0@8c4ad05dd0120b6a53c1ca374dca2ad0a1c4ed92',
  'symfony/polyfill-mbstring' => 'v1.28.0@42292d99c55abe617799667f454222c54c60e229',
  'symfony/polyfill-php72' => 'v1.28.0@70f4aebd92afca2f865444d30a4d2151c13c3179',
  'symfony/polyfill-php80' => 'v1.28.0@6caa57379c4aec19c0a12a38b59b26487dcfe4b5',
  'symfony/service-contracts' => 'v3.4.1@fe07cbc8d837f60caf7018068e350cc5163681a0',
  'symfony/string' => 'v6.4.2@7cb80bc10bfcdf6b5492741c0b9357dac66940bc',
  'tracy/tracy' => 'v2.10.5@86bdba4aa0f707d3f125933931d3df6e5c7aad79',
  'nette/tester' => 'v2.5.1@92ad30ca60ac1e27f0c7e48b8b4e4ff1395c00c0',
  'symfony/thanks' => 'v1.2.10@e9c4709560296acbd4fe9e12b8d57a925aa7eae8',
  'nette/web-project' => 'No version set (parsed as 1.0.0)@',
);

    private function __construct()
    {
    }

    /**
     * @psalm-pure
     *
     * @psalm-suppress ImpureMethodCall we know that {@see InstalledVersions} interaction does not
     *                                  cause any side effects here.
     */
    public static function rootPackageName() : string
    {
        if (!self::composer2ApiUsable()) {
            return self::ROOT_PACKAGE_NAME;
        }

        return InstalledVersions::getRootPackage()['name'];
    }

    /**
     * @throws OutOfBoundsException If a version cannot be located.
     *
     * @psalm-param key-of<self::VERSIONS> $packageName
     * @psalm-pure
     *
     * @psalm-suppress ImpureMethodCall we know that {@see InstalledVersions} interaction does not
     *                                  cause any side effects here.
     */
    public static function getVersion(string $packageName): string
    {
        if (self::composer2ApiUsable()) {
            return InstalledVersions::getPrettyVersion($packageName)
                . '@' . InstalledVersions::getReference($packageName);
        }

        if (isset(self::VERSIONS[$packageName])) {
            return self::VERSIONS[$packageName];
        }

        throw new OutOfBoundsException(
            'Required package "' . $packageName . '" is not installed: check your ./vendor/composer/installed.json and/or ./composer.lock files'
        );
    }

    private static function composer2ApiUsable(): bool
    {
        if (!class_exists(InstalledVersions::class, false)) {
            return false;
        }

        if (method_exists(InstalledVersions::class, 'getAllRawData')) {
            $rawData = InstalledVersions::getAllRawData();
            if (count($rawData) === 1 && count($rawData[0]) === 0) {
                return false;
            }
        } else {
            $rawData = InstalledVersions::getRawData();
            if ($rawData === null || $rawData === []) {
                return false;
            }
        }

        return true;
    }
}
